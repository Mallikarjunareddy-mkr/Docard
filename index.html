<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Web File Manager</title>
  <style>
    body { margin: 0; font-family: Arial, sans-serif; background: #f8f9fa; }
    header { background: #343a40; color: #fff; padding: 12px; text-align: center; }
    .layout { display: flex; height: calc(100vh - 50px); }/* Sidebar */
.sidebar { width: 220px; background: #212529; color: white; padding: 15px; display: flex; flex-direction: column; }
.sidebar h2 { font-size: 18px; margin-bottom: 15px; }
.nav-btn { background: none; border: none; color: white; text-align: left; padding: 10px; margin: 2px 0; cursor: pointer; font-size: 15px; border-radius: 6px; }
.nav-btn:hover { background: #495057; }

/* Main content */
.main { flex: 1; padding: 15px; display: flex; flex-direction: column; }
.toolbar { margin-bottom: 10px; }
.toolbar button { margin-right: 10px; padding: 8px 12px; border: none; border-radius: 5px; cursor: pointer; background: #007bff; color: white; }
.toolbar button:hover { background: #0056b3; }

/* File area */
.file-area { flex: 1; background: white; border: 1px solid #dee2e6; border-radius: 6px; padding: 10px; display: grid; grid-template-columns: repeat(auto-fill, 120px); gap: 15px; align-content: flex-start; overflow-y: auto; }
.file-item { text-align: center; cursor: pointer; }
.file-icon { font-size: 40px; margin-bottom: 5px; color: #6c757d; }
.file-name { font-size: 13px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* Folder tree placeholder */
.folder-tree { margin-bottom: 20px; font-size: 14px; color: #ddd; }
.folder { margin-left: 15px; cursor: pointer; }

  </style>
</head>
<body>
  <header>
    <h1>Web File Manager</h1>
  </header>  <div class="layout">
    <!-- Sidebar -->
    <div class="sidebar">
      <h2>Navigation</h2>
      <button class="nav-btn" onclick="goHome()">üè† Home</button>
      <button class="nav-btn" onclick="showSection('local')">üíª Local Storage</button>
      <button class="nav-btn" onclick="showSection('cloud')">‚òÅÔ∏è Cloud Storage</button>
      <div class="folder-tree" id="folderTree">
        <p><strong>Folders</strong></p>
        <div class="folder" onclick="openFolder('/')">üìÅ Root</div>
      </div>
    </div><!-- Main Content -->
<div class="main">
  <!-- Toolbar -->
  <div class="toolbar">
    <button onclick="uploadFiles()">‚¨ÜÔ∏è Upload</button>
    <button onclick="createFolder()">üìÇ New Folder</button>
    <input type="file" id="fileInput" multiple style="display:none">
  </div>

  <!-- File Grid -->
  <div class="file-area" id="fileArea"></div>
</div>

  </div>  <script>
    let db;
    let currentPath = '/';

    // Init IndexedDB
    function initDB() {
      const request = indexedDB.open('FileManagerDB', 2);

      request.onupgradeneeded = function(e) {
        db = e.target.result;
        if (!db.objectStoreNames.contains('files')) {
          db.createObjectStore('files', { keyPath: 'id' });
        }
      };

      request.onsuccess = function(e) {
        db = e.target.result;
        renderFiles();
      };
    }

    function goHome() {
      currentPath = '/';
      renderFiles();
    }

    function showSection(section) {
      if (section === 'cloud') {
        alert('Cloud integration coming soon!');
      } else {
        currentPath = '/';
        renderFiles();
      }
    }

    function uploadFiles() {
      const input = document.getElementById('fileInput');
      input.click();
      input.onchange = function() {
        const files = input.files;
        for (let f of files) {
          const reader = new FileReader();
          reader.onload = function(e) {
            const transaction = db.transaction(['files'], 'readwrite');
            const store = transaction.objectStore('files');
            const id = currentPath + f.name;
            store.put({ id, name: f.name, path: currentPath, type: 'file', data: e.target.result });
            transaction.oncomplete = renderFiles;
          };
          reader.readAsDataURL(f);
        }
      };
    }

    function createFolder() {
      const name = prompt('Enter folder name:');
      if (!name) return;
      const transaction = db.transaction(['files'], 'readwrite');
      const store = transaction.objectStore('files');
      const id = currentPath + name + '/';
      store.put({ id, name, path: currentPath, type: 'folder' });
      transaction.oncomplete = renderFiles;
    }

    function openFolder(path) {
      currentPath = path;
      renderFiles();
    }

    function renderFiles() {
      const transaction = db.transaction(['files'], 'readonly');
      const store = transaction.objectStore('files');
      const request = store.getAll();

      request.onsuccess = function() {
        const area = document.getElementById('fileArea');
        area.innerHTML = '';
        request.result.filter(item => item.path === currentPath).forEach(file => {
          const div = document.createElement('div');
          div.className = 'file-item';
          div.onclick = () => {
            if (file.type === 'folder') openFolder(file.id);
            else downloadFile(file.id);
          };
          div.innerHTML = `
            <div class="file-icon">${file.type === 'folder' ? 'üìÅ' : 'üìÑ'}</div>
            <div class="file-name">${file.name}</div>
          `;
          area.appendChild(div);
        });
      };
    }

    function downloadFile(id) {
      const transaction = db.transaction(['files'], 'readonly');
      const store = transaction.objectStore('files');
      const request = store.get(id);
      request.onsuccess = function() {
        const file = request.result;
        if (file && file.type === 'file') {
          const a = document.createElement('a');
          a.href = file.data;
          a.download = file.name;
          a.click();
        }
      };
    }

    window.onload = initDB;
  </script></body>
</html>
