<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Docard - Local File Manager</title>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- ====== Top Bar ====== -->
<header class="filemanager-header">
  <div style="display:flex;align-items:center;gap:12px;">
    <button onclick="goBackManager()" class="material-symbols-outlined">arrow_back</button>
    <button onclick="goToDashboard()" class="material-symbols-outlined">home</button>
    <span id="storageInfo" style="margin-left:12px;font-weight:500;">Used: 0 / Total: 100 MB</span>
  </div>
  <div class="toolbar">
    <button onclick="openSettings()" class="material-symbols-outlined">settings</button>
    <button onclick="toggleTheme()" id="themeIcon" class="material-symbols-outlined">light_mode</button>
    <button onclick="openHelpModal()" class="material-symbols-outlined">help</button>
  </div>
</header>

<!-- ====== Breadcrumb / Folder Path ====== -->
<div id="breadcrumb-wrapper">
  <div id="breadcrumb"></div>
</div>

<!-- ====== Main File Area ====== -->
<div class="main-content">
  <div id="fileArea"></div>

  <input type="file" id="fileInput" multiple style="display:none;" onchange="handleFileUpload(event)">
</div>

<!-- ====== Floating Action Button ====== -->
<div class="fab" id="fabBtn" onclick="fabAction()">
  <span class="material-symbols-outlined">add</span>
</div>

<!-- FAB Menu -->
<div id="fabMenu">
  <button onclick="uploadFile()">Upload File</button>
  <button onclick="createFolder()">New Folder</button>
</div>

<!-- File Operations Panel -->
<div id="fileOperations">
  <button onclick="previewSelected()">Preview</button>
  <button onclick="renameSelected()">Rename</button>
  <button onclick="downloadSelected()">Download</button>
  <button onclick="confirmDeleteSelected()">Delete</button>
  <button onclick="cancelSelection()">Cancel</button>
</div>

<!-- Preview Modal -->
<div id="previewModal" onclick="closePreview(event)">
  <div id="previewContent">
    <button id="previewClose" onclick="closePreview(event)">close</button>
  </div>
</div>

<!-- File Details Modal -->
<div id="detailsModal">
  <div id="detailsContent">
    <button onclick="closeDetailsModal()" class="material-symbols-outlined" style="position:absolute;top:12px;right:12px;">close</button>
    <div id="detailsContentInner"></div>
  </div>
</div>

<!-- Settings Modal -->
<div id="settingsModal">
  <div style="background:var(--color-card);padding:24px;border-radius:16px;position:relative;">
    <button onclick="closeSettings()" class="material-symbols-outlined" style="position:absolute;top:12px;right:12px;">close</button>
    <h3>Settings</h3>
    <p id="modalStorageInfo">Used: 0 / Total: 100 MB</p>
  </div>
</div>

<!-- Help Modal -->
<div id="helpModal">
  <div style="background:var(--color-card);padding:24px;border-radius:16px;position:relative;">
    <button onclick="closeHelpModal()" class="material-symbols-outlined" style="position:absolute;top:12px;right:12px;">close</button>
    <h3>Help</h3>
    <p>Drag & drop files here or use the upload button. Click folders to navigate inside them. Select files for operations like rename, download, or delete.</p>
  </div>
</div>

<!-- Toast Notification -->
<div id="toast" class="toast"></div>

<script src="script.js"></script>
<script>
// ====== Page Load ======
document.addEventListener('DOMContentLoaded', ()=>{
    showPage('localPage');
    renderFiles();
    document.getElementById('fabMenu').style.display='none';
    document.getElementById('fileOperations').style.display='none';
});

// ====== Dashboard Button ======
function goToDashboard(){
    if(confirm("Return to Dashboard? Unsaved changes will remain.")){
        window.location.href="index.html";
    }
}
</script>
</body>
</html>
